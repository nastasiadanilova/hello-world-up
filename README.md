# веб-приложение, возвращающее значение + скрипт мониторинга и автозапуск

## Содержание
- [Описание](#описание)
- [Запуск](#запуск)
- [Управление](#управление)
  - [macOS](#управление-на-macos)
  - [Linux](#управление-на-linux)
  - [Windows](#управление-на-windows)
- [Настройки](#настройки)

## Описание
Простое веб-приложение, которое отвечает `Hello World!` на `http://127.0.0.1:8080`  
Мониторинг каждые 10 секунд (можно менять) проверяет доступность и перезапускает при падении  
Установщик одной командой + автозапуск при старте системы (macOS · Linux · Windows)

## Запуск (одинаково на Linux · macOS · Windows)

```bash
# 1. клонируем репозиторий
git clone https://github.com/твой-ник/hello-world-up.git
cd hello-world-up

# 2. переходим в папку установщика
cd cmd/install

# 3. запускаем установку
go run install.go
```
## Управление

### Управление на macOS

| Действие                        | Команда                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------|
| Проверить работу                | `curl http://127.0.0.1:8080`                                                             |
| Логи в реальном времени         | `tail -f ../hello-world/monitor.log`                                                     |
| Остановить быстро               | `pkill -f monitor`                                                                       |
| Остановить через систему        | `launchctl unload ~/Library/LaunchAgents/local.helloworld.monitor.plist`                |
| Запустить снова                 | `launchctl load ~/Library/LaunchAgents/local.helloworld.monitor.plist`                  |
| Полностью убрать автозапуск     | `rm ~/Library/LaunchAgents/local.helloworld.monitor.plist`                              |
| Удалить всё                     | `rm -rf ../hello-world`                                                                  |

### Управление на Linux

| Действие                        | Команда                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------|
| Проверить работу                | `curl http://127.0.0.1:8080`                                                             |
| Логи в реальном времени         | `tail -f ../hello-world/monitor.log`                                                     |
| Остановить быстро               | `pkill -f monitor`                                                                       |
| Статус сервиса                  | `systemctl --user status hello-monitor.service`                                          |
| Остановить сервис               | `systemctl --user stop hello-monitor.service`                                            |
| Запустить сервис                | `systemctl --user start hello-monitor.service`                                           |
| Полностью убрать автозапуск     | `systemctl --user disable --now hello-monitor.service && rm ~/.config/systemd/user/hello-monitor.service` |
| Удалить всё                     | `rm -rf ../hello-world`                                                                  |

### Управление на Windows

| Действие                        | Команда (CMD)                                            |
|---------------------------------|----------------------------------------------------------|
| Проверить работу                | открыть в браузере или `curl http://127.0.0.1:8080`       |
| Логи в реальном времени         | `type ..\hello-world\monitor.log`                        |
| Остановить быстро               | `taskkill /f /im monitor.exe`                            |
| Полностью убрать автозапуск     | удалить файл `HelloWorld-Monitor.bat` из папки Автозагрузка |
| Удалить всё                     | `rmdir /s /q ..\hello-world`                             |

## Настройки (в monitor.go)

| Параметр              | Значение по умолчанию                     | Что делает                                              |
|-----------------------|-------------------------------------------|----------------------------------------------------------|
| `appBinaryName`       | `"web"`                                   | имя бинарника веб-приложения (без .exe на Windows)      |
| `healthURL`           | `"http://127.0.0.1:8080"`                 | адрес, по которому мониторим                   |
| `interval`            | `10 * time.Second`                        | частота проверки в секундах                        |
| `timeout`             | `3 * time.Second`                         | таймаут HTTP-запроса при проверке                      |

**Как поменять:**  
1. Открыть `monitor.go`  
2. Поправить строки в начале файла на нужные значения  
3. Запуск установщика заново:

```bash
cd cmd/install
go run install.go
